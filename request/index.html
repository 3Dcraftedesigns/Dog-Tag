<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dog Tag — Order summary</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#eaf7f1; --card:#ffffff; --ink:#0b3f2e; --soft:#335047; --chip:#c7eadc;
  }
  *{box-sizing:border-box} html,body{margin:0}
  body{background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
  .wrap{max-width:880px;margin:28px auto 56px;padding:0 16px}
  h1{margin:0 0 12px;text-align:center;font-weight:800;font-size:clamp(28px,5vw,44px)}
  p.lead{text-align:center;margin:0 0 22px;color:var(--soft);font-weight:500}
  .card{background:var(--card);border:2px solid #d8eee5;border-radius:16px;padding:20px}

  .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px 24px}
  @media (max-width:720px){.grid{grid-template-columns:1fr}}

  .row{display:flex;gap:10px;align-items:baseline}
  .lab{min-width:210px;font-weight:800}
  .val{color:var(--soft)}
  .chip{display:inline-block;background:var(--chip);color:var(--ink);padding:.45rem .9rem;border-radius:999px;font-weight:800}
  .actions{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
  .btn{display:inline-flex;align-items:center;gap:8px;background:#0a7d57;color:#fff;border:0;border-radius:999px;padding:10px 14px;font-weight:800;cursor:pointer}
  .btn.secondary{background:#0b3f2e}
  .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Order summary</h1>
    <p class="lead">A read-only view of what was entered in the form.</p>

    <div class="card">
      <div class="grid">
        <div class="row"><div class="lab">Dog’s name</div>           <div class="val" id="dogName">—</div></div>
        <div class="row"><div class="lab">Owner’s name</div>         <div class="val" id="ownerName">—</div></div>

        <div class="row"><div class="lab">Base color</div>           <div class="val" id="baseColor">—</div></div>
        <div class="row"><div class="lab">Paw color</div>            <div class="val" id="pawColor">—</div></div>

        <div class="row"><div class="lab">Owner phone</div>          <div class="val mono" id="ownerPhone">—</div></div>
        <div class="row"><div class="lab">Dog name color (back)</div><div class="val" id="backColor">—</div></div>

        <div class="row"><div class="lab">Chip number</div>          <div class="val mono" id="chip">—</div></div>
        <div class="row"><div class="lab">Size</div>                 <div class="val" id="size">—</div></div>

        <div class="row"><div class="lab">Letter type</div>          <div class="val" id="letterType">—</div></div>
        <div class="row" style="grid-column:1 / -1"><div class="lab">Notes</div><div class="val" id="notes">—</div></div>
      </div>

      <div class="actions">
        <a class="btn" href="../requestlink/">← Back to form</a>
        <button id="copyAll" class="btn secondary">Copy all</button>
      </div>
    </div>
  </div>

<!-- LZ-String to decode compact links -->
<script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>
<script>
  function readData() {
    const m = location.hash.match(/#data=(.*)$/);
    if (!m) return null;
    const raw = decodeURIComponent(m[1] || "");
    // Try compressed first; fall back to plain JSON for old links
    let json = LZString.decompressFromEncodedURIComponent(raw);
    if (!json) { try { json = decodeURIComponent(raw); } catch(e) {} }
    try { return JSON.parse(json); } catch(e) { return null; }
  }

  function set(id, v){ document.getElementById(id).textContent = v && String(v).trim() ? v : "—"; }

  const data = readData();
  if (!data){
    document.querySelector('.card').innerHTML =
      "<p>Sorry, no valid data was found in this link.</p><p><a href='../requestlink/' class='btn'>Go to form</a></p>";
  } else {
    set('dogName', data.dogName);
    set('ownerName', data.ownerName);
    set('ownerPhone', data.ownerPhone);
    set('chip', data.chip);
    set('size', data.size);
    set('baseColor', data.baseColor);
    set('pawColor', data.pawColor);
    set('backColor', data.backColor);
    set('letterType', data.letterType);
    set('notes', data.notes);
  }

  // Copy everything to clipboard (quick for production flow)
  document.getElementById('copyAll').addEventListener('click', ()=>{
    const fields = ['dogName','ownerName','ownerPhone','chip','size','baseColor','pawColor','backColor','letterType','notes'];
    const lines = fields.map(id => {
      const label = document.querySelector(`[id='${id}']`).previousElementSibling.textContent.trim();
      const value = document.getElementById(id).textContent.trim();
      return `${label}: ${value}`;
    }).join('\n');
    navigator.clipboard.writeText(lines).then(()=>{
      const btn = document.getElementById('copyAll');
      const old = btn.textContent; btn.textContent = 'Copied!';
      setTimeout(()=>btn.textContent = old, 1200);
    });
  });
</script>
</body>
</html>
